import type { Order, Driver, Service, Offer, User, OrderEvent, OrderStatus } from '@/types';

// Mock Services
export const services: Service[] = [
  {
    id: 'antar-barang',
    name: 'Antar Barang',
    icon: 'Package',
    description: 'Kirim paket ke lokasi tujuan dengan aman',
    requiresPin: true,
  },
  {
    id: 'belanja-titip',
    name: 'Belanja Titip',
    icon: 'ShoppingCart',
    description: 'Belanja di warung, toko, atau pasar',
    requiresPin: true,
  },
  {
    id: 'ambil-dokumen',
    name: 'Ambil Dokumen',
    icon: 'FileText',
    description: 'Ambil dokumen, berkas, atau surat penting',
    requiresPin: true,
  },
  {
    id: 'lainnya',
    name: 'Lainnya',
    icon: 'MoreHorizontal',
    description: 'Tugas khusus sesuai kebutuhan Anda',
    requiresPin: false,
  },
];

// Mock Drivers
export const drivers: Driver[] = [
  {
    id: 'drv-001',
    phone: '081234567891',
    name: 'Pak Budi',
    avatar_url: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Budi',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Budi',
    status: 'ONLINE',
    rating: 4.8,
    total_orders: 156,
    totalOrders: 156,
    last_active: new Date(),
    lastActive: new Date(),
    vehicle_type: 'Honda Beat',
    vehicleType: 'Honda Beat',
    vehicle_plate: 'AB 1234 XY',
    vehiclePlate: 'AB 1234 XY',
  },
  {
    id: 'drv-002',
    phone: '081234567892',
    name: 'Mas Adi',
    avatar_url: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Adi',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Adi',
    status: 'BUSY',
    rating: 4.9,
    total_orders: 203,
    totalOrders: 203,
    current_order_id: 'ord-001',
    currentOrderId: 'ord-001',
    last_active: new Date(),
    lastActive: new Date(),
    vehicle_type: 'Honda Vario',
    vehicleType: 'Honda Vario',
    vehicle_plate: 'AB 5678 ZZ',
    vehiclePlate: 'AB 5678 ZZ',
  },
  {
    id: 'drv-003',
    phone: '081234567893',
    name: 'Pak Sigit',
    avatar_url: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Sigit',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Sigit',
    status: 'ONLINE',
    rating: 4.7,
    total_orders: 89,
    totalOrders: 89,
    last_active: new Date(),
    lastActive: new Date(),
    vehicle_type: 'Yamaha NMax',
    vehicleType: 'Yamaha NMax',
    vehicle_plate: 'AB 9012 WW',
    vehiclePlate: 'AB 9012 WW',
  },
  {
    id: 'drv-004',
    phone: '081234567894',
    name: 'Mas Rudi',
    avatar_url: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Rudi',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Rudi',
    status: 'OFFLINE',
    rating: 4.6,
    total_orders: 45,
    totalOrders: 45,
    last_active: new Date(Date.now() - 3600000),
    lastActive: new Date(Date.now() - 3600000),
    vehicle_type: 'Honda Scoopy',
    vehicleType: 'Honda Scoopy',
    vehicle_plate: 'AB 3456 QQ',
    vehiclePlate: 'AB 3456 QQ',
  },
];

// Mock Current User
export const currentUser: User = {
  id: 'usr-001',
  phone: '081234567890',
  name: 'Ahmad Fauzi',
  avatar_url: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Ahmad',
  avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Ahmad',
  points: 1250,
  created_at: new Date('2024-01-15'),
  memberSince: new Date('2024-01-15'),
  default_pickup: {
    address: 'Jl. MT Haryono No. 123, Wonosari',
    lat: -7.965,
    lng: 110.601,
    landmark: 'Rumah cat kuning, depan warung Pak Slamet',
  },
  defaultPickup: {
    address: 'Jl. MT Haryono No. 123, Wonosari',
    lat: -7.965,
    lng: 110.601,
    landmark: 'Rumah cat kuning, depan warung Pak Slamet',
  },
};

// Mock Orders
export const orders: Order[] = [
  {
    id: 'ord-001',
    order_id: 'JSG-20260130-001',
    orderId: 'JSG-20260130-001',
    user_id: 'usr-001',
    userId: 'usr-001',
    userName: 'Ahmad Fauzi',
    userPhone: '081298765432',
    driver_id: 'drv-002',
    driverId: 'drv-002',
    driver: drivers[1],
    service_type: 'antar-barang',
    serviceType: 'antar-barang',
    service_name: 'Antar Barang',
    serviceName: 'Antar Barang',
    status: 'DRIVER_TO_PICKUP',
    pickup: {
      address: 'Jl. MT Haryono No. 123, Wonosari',
      lat: -7.965,
      lng: 110.601,
      landmark: 'Rumah cat kuning',
    },
    dropoff: {
      address: 'Jl. Sudirman No. 45, Playen',
      lat: -7.93,
      lng: 110.55,
      landmark: 'Kantor Pos Playen',
    },
    pickup_address: 'Jl. MT Haryono No. 123, Wonosari',
    pickup_landmark: 'Rumah cat kuning',
    dropoff_address: 'Jl. Sudirman No. 45, Playen',
    dropoff_landmark: 'Kantor Pos Playen',
    notes: 'Paket berisi dokumen penting, jangan ditekuk',
    item_size: 'kecil',
    itemSize: 'kecil',
    who_pays: 'user',
    whoPays: 'user',
    requires_pin: true,
    requiresPin: true,
    pin: '4521',
    estimated_fee_min: 25000,
    estimated_fee_max: 35000,
    estimatedFee: { min: 25000, max: 35000 },
    estimated_time_min: 30,
    estimated_time_max: 45,
    estimatedTime: { min: 30, max: 45 },
    created_at: new Date(Date.now() - 600000),
    createdAt: new Date(Date.now() - 600000),
    assigned_at: new Date(Date.now() - 300000),
    is_subscription: false,
    isSubscription: false,
  },
  {
    id: 'ord-002',
    order_id: 'JSG-20260130-002',
    orderId: 'JSG-20260130-002',
    user_id: 'usr-001',
    userId: 'usr-001',
    userName: 'Ahmad Fauzi',
    userPhone: '081298765432',
    service_type: 'belanja-titip',
    serviceType: 'belanja-titip',
    service_name: 'Belanja Titip',
    serviceName: 'Belanja Titip',
    status: 'SEARCHING_DRIVER',
    pickup: {
      address: 'Pasar Wonosari',
      lat: -7.968,
      lng: 110.603,
      landmark: 'Pintu masuk utama',
    },
    dropoff: {
      address: 'Jl. Pemuda No. 78, Wonosari',
      lat: -7.962,
      lng: 110.598,
      landmark: 'Rumah pagar hijau',
    },
    pickup_address: 'Pasar Wonosari',
    pickup_landmark: 'Pintu masuk utama',
    dropoff_address: 'Jl. Pemuda No. 78, Wonosari',
    dropoff_landmark: 'Rumah pagar hijau',
    notes: 'Beli 1kg beras, 1L minyak goreng, 5 bungkus mie instan',
    item_size: 'sedang',
    itemSize: 'sedang',
    who_pays: 'driver',
    whoPays: 'driver',
    requires_pin: true,
    requiresPin: true,
    estimated_fee_min: 15000,
    estimated_fee_max: 20000,
    estimatedFee: { min: 15000, max: 20000 },
    estimated_time_min: 45,
    estimated_time_max: 60,
    estimatedTime: { min: 45, max: 60 },
    created_at: new Date(Date.now() - 120000),
    createdAt: new Date(Date.now() - 120000),
    is_subscription: false,
    isSubscription: false,
  },
  {
    id: 'ord-003',
    order_id: 'JSG-20260129-003',
    orderId: 'JSG-20260129-003',
    user_id: 'usr-001',
    userId: 'usr-001',
    userName: 'Ahmad Fauzi',
    userPhone: '081298765432',
    driver_id: 'drv-001',
    driverId: 'drv-001',
    driver: drivers[0],
    service_type: 'ambil-dokumen',
    serviceType: 'ambil-dokumen',
    service_name: 'Ambil Dokumen',
    serviceName: 'Ambil Dokumen',
    status: 'COMPLETED',
    pickup: {
      address: 'Kantor Desa Semanu',
      lat: -8.02,
      lng: 110.55,
      landmark: 'Meja informasi',
    },
    dropoff: {
      address: 'Jl. Pahlawan No. 12, Wonosari',
      lat: -7.965,
      lng: 110.595,
      landmark: 'Rumah tembok batu',
    },
    pickup_address: 'Kantor Desa Semanu',
    pickup_landmark: 'Meja informasi',
    dropoff_address: 'Jl. Pahlawan No. 12, Wonosari',
    dropoff_landmark: 'Rumah tembok batu',
    notes: 'Ambil surat keterangan domisili atas nama Ahmad Fauzi',
    item_size: 'kecil',
    itemSize: 'kecil',
    who_pays: 'user',
    whoPays: 'user',
    requires_pin: true,
    requiresPin: true,
    pin: '7890',
    estimated_fee_min: 30000,
    estimated_fee_max: 40000,
    estimatedFee: { min: 30000, max: 40000 },
    final_fee: 35000,
    finalFee: 35000,
    estimated_time_min: 60,
    estimated_time_max: 90,
    estimatedTime: { min: 60, max: 90 },
    created_at: new Date(Date.now() - 86400000),
    createdAt: new Date(Date.now() - 86400000),
    assigned_at: new Date(Date.now() - 85000000),
    started_at: new Date(Date.now() - 84000000),
    completed_at: new Date(Date.now() - 80000000),
    is_subscription: false,
    isSubscription: false,
  },
  {
    id: 'ord-004',
    order_id: 'JSG-20260128-004',
    orderId: 'JSG-20260128-004',
    user_id: 'usr-001',
    userId: 'usr-001',
    userName: 'Ahmad Fauzi',
    userPhone: '081298765432',
    service_type: 'antar-barang',
    serviceType: 'antar-barang',
    service_name: 'Antar Barang',
    serviceName: 'Antar Barang',
    status: 'CANCELED',
    pickup: {
      address: 'Jl. Ahmad Yani No. 55, Wonosari',
      lat: -7.97,
      lng: 110.605,
      landmark: 'Toko elektronik',
    },
    dropoff: {
      address: 'Jl. Diponegoro No. 33, Wonosari',
      lat: -7.968,
      lng: 110.61,
      landmark: 'Kost putri',
    },
    pickup_address: 'Jl. Ahmad Yani No. 55, Wonosari',
    pickup_landmark: 'Toko elektronik',
    dropoff_address: 'Jl. Diponegoro No. 33, Wonosari',
    dropoff_landmark: 'Kost putri',
    notes: 'Kirim paket pakaian',
    item_size: 'sedang',
    itemSize: 'sedang',
    who_pays: 'user',
    whoPays: 'user',
    requires_pin: false,
    requiresPin: false,
    estimated_fee_min: 20000,
    estimated_fee_max: 25000,
    estimatedFee: { min: 20000, max: 25000 },
    estimated_time_min: 20,
    estimated_time_max: 30,
    estimatedTime: { min: 20, max: 30 },
    created_at: new Date(Date.now() - 172800000),
    createdAt: new Date(Date.now() - 172800000),
    canceled_at: new Date(Date.now() - 172700000),
    cancel_reason: 'user_cancel_before_assigned',
    is_subscription: false,
    isSubscription: false,
  },
];

// Mock Offers for Driver App
export const offers: Offer[] = [
  {
    id: 'off-001',
    orderId: 'ord-002',
    pickup: {
      address: 'Pasar Wonosari',
      lat: -7.968,
      lng: 110.603,
      landmark: 'Pintu masuk utama',
    },
    dropoff: {
      address: 'Jl. Pemuda No. 78, Wonosari',
      lat: -7.962,
      lng: 110.598,
      landmark: 'Rumah pagar hijau',
    },
    serviceType: 'belanja-titip',
    serviceName: 'Belanja Titip',
    estimatedFee: 18000,
    distance: 2.5,
    estimatedTime: 45,
    notes: 'Beli 1kg beras, 1L minyak goreng, 5 bungkus mie instan',
    ttl: 25,
    createdAt: new Date(),
  },
  {
    id: 'off-002',
    orderId: 'ord-006',
    pickup: {
      address: 'Jl. Sudirman No. 10, Wonosari',
      lat: -7.965,
      lng: 110.595,
      landmark: 'Kantor camat',
    },
    dropoff: {
      address: 'Jl. Ahmad Yani No. 67, Wonosari',
      lat: -7.97,
      lng: 110.605,
      landmark: 'Rumah cat biru',
    },
    serviceType: 'antar-barang',
    serviceName: 'Antar Barang',
    estimatedFee: 22000,
    distance: 3.2,
    estimatedTime: 35,
    notes: 'Paket elektronik kecil, hati-hati',
    ttl: 30,
    createdAt: new Date(),
  },
];

// Mock Order Events (Audit Trail)
export const orderEvents: OrderEvent[] = [
  {
    id: 'evt-001',
    order_id: 'ord-001',
    status: 'CREATED',
    created_at: new Date(Date.now() - 600000),
    actor: 'user',
    actor_id: 'usr-001',
    notes: 'Order dibuat oleh user',
  },
  {
    id: 'evt-002',
    order_id: 'ord-001',
    status: 'SEARCHING_DRIVER',
    created_at: new Date(Date.now() - 580000),
    actor: 'system',
    notes: 'Mencari driver terdekat',
  },
  {
    id: 'evt-003',
    order_id: 'ord-001',
    status: 'ASSIGNED',
    created_at: new Date(Date.now() - 300000),
    actor: 'system',
    actor_id: 'drv-002',
    notes: 'Driver Mas Adi ditugaskan',
  },
  {
    id: 'evt-004',
    order_id: 'ord-001',
    status: 'DRIVER_TO_PICKUP',
    created_at: new Date(Date.now() - 280000),
    actor: 'driver',
    actor_id: 'drv-002',
    notes: 'Driver menuju lokasi pickup',
  },
];

// Helper functions
export const getOrderById = (id: string): Order | undefined => {
  return orders.find(o => o.id === id || o.order_id === id);
};

export const getDriverById = (id: string): Driver | undefined => {
  return drivers.find(d => d.id === id);
};

export const getOrdersByStatus = (status: OrderStatus): Order[] => {
  return orders.filter(o => o.status === status);
};

export const getActiveOrders = (): Order[] => {
  return orders.filter(o => 
    ['CREATED', 'SEARCHING_DRIVER', 'ASSIGNED', 'DRIVER_TO_PICKUP', 'IN_PROGRESS', 'DRIVER_TO_DROPOFF'].includes(o.status)
  );
};

export const getOnlineDrivers = (): Driver[] => {
  return drivers.filter(d => d.status === 'ONLINE');
};
